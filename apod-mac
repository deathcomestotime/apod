#!/bin/bash
APODir=~/Downloads
apod=$APODir/apod.jpg
picture="https://www.starobserver.org/$(echo "$(curl  https://www.starobserver.org/ | grep -Po "image/.*?.jpg" | sed -e 's/<a href=//g' -e 's/"//g' -e 's/>//g')" | head -n 1)"

if [[ $(curl $picture) != *'Not Found'* ]]; then
curl $picture -o $apod
#osascript -e 'tell application "Finder" to set desktop picture to POSIX file "$apod"'
fi

## this only downloads the apod, but does not set it as wallpaper. note that you need to give the terminal permissions to execute cronjobs so extra steps for setting the daily downloads apply
